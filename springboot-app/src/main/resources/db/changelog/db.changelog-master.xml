<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <!-- Complete Database Schema Regeneration -->
    <!-- 1. New Complete Schema (replaces all previous table definitions) -->
    <include file="db/changelog/changes/100-new-schema-complete.xml"/>
    
    <!-- 2. Seed Data Files (in dependency order) -->
    <!-- User Management -->
    <include file="db/changelog/changes/101-seed-user-roles.xml"/>
    <include file="db/changelog/changes/102-seed-users.xml"/>
    
    <!-- Course Content Structure -->
    <include file="db/changelog/changes/103-seed-categories.xml"/>
    <include file="db/changelog/changes/104-seed-courses.xml"/>
    <include file="db/changelog/changes/105-seed-course-categories.xml"/>
    <include file="db/changelog/changes/106-seed-lesson-types.xml"/>
    <include file="db/changelog/changes/107-seed-video-contents.xml"/>
    <include file="db/changelog/changes/108-seed-sections.xml"/>
    <include file="db/changelog/changes/109-seed-lessons.xml"/>
    
    <!-- Student Activity -->
    <include file="db/changelog/changes/110-seed-enrollments.xml"/>
    <include file="db/changelog/changes/111-seed-lesson-completions.xml"/>
    <include file="db/changelog/changes/112-seed-quiz-questions.xml"/>
    <include file="db/changelog/changes/113-seed-reviews.xml"/>
    <include file="db/changelog/changes/119-seed-quiz-results.xml"/>
    
    <!-- Payment & Financial -->
    <include file="db/changelog/changes/114-seed-payments.xml"/>
    <include file="db/changelog/changes/115-seed-instructor-earnings.xml"/>
    <include file="db/changelog/changes/116-seed-refunds.xml"/>
    
    <!-- Administrative -->
    <include file="db/changelog/changes/117-seed-instructor-applications.xml"/>
    <include file="db/changelog/changes/118-seed-refresh-tokens.xml"/>
    <include file="db/changelog/changes/120-seed-system-logs.xml"/>
    
    <!-- Schema Updates -->
    <include file="db/changelog/changes/121-update-system-logs-actions.xml"/>

    <!-- More course -->
    <include file="db/changelog/changes/122-seed-more-courses.xml"/>
    <include file="db/changelog/changes/123-seed-more-course-categories.xml"/>
    
    <!-- System User for Webhooks -->
    <include file="db/changelog/changes/124-add-system-user.xml"/>

    <!-- Quiz Questions for Lesson -->
    <include file="db/changelog/changes/125-seed-quiz-questions-results.xml"/>

    <!-- Fix Quiz Results Question IDs -->
    <include file="db/changelog/changes/126-fix-quiz-results-question-ids.xml"/>

    <!-- Add Course Tags -->
    <include file="db/changelog/changes/127-add-course-review-status-table.xml"/>
    <include file="db/changelog/changes/128-seed-course-review-status.xml"/>
    <include file="db/changelog/changes/129-add-password-reset-tokens-table.xml"/>

    <!-- Comments System (old) -->
    <include file="db/changelog/changes/130-create-comments-table.xml"/>
    <include file="db/changelog/changes/131-seed-comments.xml"/>

    <!-- Allow nullable course review status for unpublish functionality -->
    <include file="db/changelog/changes/132-allow-nullable-course-review-status.xml"/>

    <!-- Nested Set Model Comments System (production-ready) -->
    <include file="db/changelog/changes/133-create-nested-comments-table.xml"/>
    <include file="db/changelog/changes/134-seed-nested-comments.xml"/>

    <!-- Permission System for Role-Based Access Control -->
    <include file="db/changelog/changes/135-add-permission-system.xml"/>
    <include file="db/changelog/changes/136-seed-permission-system.xml"/>
    
    <!-- Fix for permission system issues -->
    <include file="db/changelog/changes/137-seed-role-permissions.xml"/>
    <!-- <include file="db/changelog/changes/138-add-seed-permission-course-approve.xml"/> -->
    <include file="db/changelog/changes/139-add-permission-role.xml"/>
    <!-- Role Filter Rules System for Scope-Based Permission Filtering -->
    <!-- <include file="db/changelog/changes/139-create-role-filter-rule-table.xml"/> -->
    
    <!-- Comprehensive Role Filter Rules Seed Data -->
    <!-- <include file="db/changelog/changes/140-seed-role-filter-rules-core.xml"/>
    <include file="db/changelog/changes/141-seed-role-filter-rules-content.xml"/>
    <include file="db/changelog/changes/142-seed-role-filter-rules-transactional.xml"/>
    <include file="db/changelog/changes/143-seed-role-filter-rules-system.xml"/>
    <include file="db/changelog/changes/144-seed-role-filter-rules-auth.xml"/> -->

    <!-- Payment System Enhancements -->
    <include file="db/changelog/changes/145-add-paid-out-at-to-payments.xml"/>

    <!-- Refunds System Enhancements -->
    <include file="db/changelog/changes/146-add-rejected-reason-to-refunds.xml"/>
    <include file="db/changelog/changes/147-update-student-role-permissions.xml"/>
    <include file="db/changelog/changes/148-add-permission-paidout.xml"/>
    <include file="db/changelog/changes/149-chat-message-table.xml"/>
    <include file="db/changelog/changes/150-seed-chat-messages.xml"/>
    <include file="db/changelog/changes/151-add-certificate-table.xml"/>
    <include file="db/changelog/changes/151-remove-uniqueconstraints-userid.xml"/>
    <include file="db/changelog/changes/151-add-description-to-user-roles.xml"/>
    
    <!-- Role Management System -->
    <include file="db/changelog/changes/152-add-role-resource-permissions.xml"/>
    
    <!-- Remove Role Management System (Rollback) -->
    <include file="db/changelog/changes/153-remove-role-resource-permissions.xml"/>
    
    <!-- Discount and Affiliate System -->
    <include file="db/changelog/changes/154-add-discount-table.xml"/>
    <include file="db/changelog/changes/155-seed-discount.xml"/>
    <include file="db/changelog/changes/156-update-affiliate_payouts.xml"/>
    
    <include file="db/changelog/changes/157-add-notification-table.xml"/> 
    <include file="db/changelog/changes/158-seed-notification.xml"/>
    <include file="db/changelog/changes/159-seed-discount-user-002.xml"/>
    <include file="db/changelog/changes/160-add-is-deleted-instructor-applications.xml"/>
</databaseChangeLog>

