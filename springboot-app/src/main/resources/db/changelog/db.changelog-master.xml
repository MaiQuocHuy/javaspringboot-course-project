<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <!-- Complete Database Schema Regeneration -->
    <!-- 1. New Complete Schema (replaces all previous table definitions) -->
    <include file="db/changelog/changes/100-new-schema-complete.xml"/>
    
    <!-- 2. Seed Data Files (in dependency order) -->
    <!-- User Management -->
    <include file="db/changelog/changes/101-seed-user-roles.xml"/>
    <include file="db/changelog/changes/102-seed-users.xml"/>
    
    <!-- Course Content Structure -->
    <include file="db/changelog/changes/103-seed-categories.xml"/>
    <include file="db/changelog/changes/104-seed-courses.xml"/>
    <include file="db/changelog/changes/105-seed-course-categories.xml"/>
    <include file="db/changelog/changes/106-seed-lesson-types.xml"/>
    <include file="db/changelog/changes/107-seed-video-contents.xml"/>
    <include file="db/changelog/changes/108-seed-sections.xml"/>
    <include file="db/changelog/changes/109-seed-lessons.xml"/>
    
    <!-- Student Activity -->
    <include file="db/changelog/changes/110-seed-enrollments.xml"/>
    <include file="db/changelog/changes/111-seed-lesson-completions.xml"/>
    <include file="db/changelog/changes/112-seed-quiz-questions.xml"/>
    <include file="db/changelog/changes/113-seed-reviews.xml"/>
    <include file="db/changelog/changes/119-seed-quiz-results.xml"/>
    
    <!-- Payment & Financial -->
    <include file="db/changelog/changes/114-seed-payments.xml"/>
    <include file="db/changelog/changes/115-seed-instructor-earnings.xml"/>
    <include file="db/changelog/changes/116-seed-refunds.xml"/>
    
    <!-- Administrative -->
    <include file="db/changelog/changes/117-seed-instructor-applications.xml"/>
    <include file="db/changelog/changes/118-seed-refresh-tokens.xml"/>
    <include file="db/changelog/changes/120-seed-system-logs.xml"/>
    
    <!-- Schema Updates -->
    <include file="db/changelog/changes/121-update-system-logs-actions.xml"/>

    <!-- More course -->
    <include file="db/changelog/changes/122-seed-more-courses.xml"/>
    <include file="db/changelog/changes/123-seed-more-course-categories.xml"/>
    
    <!-- System User for Webhooks -->
    <include file="db/changelog/changes/124-add-system-user.xml"/>

    <!-- Quiz Questions for Lesson -->
    <include file="db/changelog/changes/125-seed-quiz-questions-results.xml"/>

    <!-- Fix Quiz Results Question IDs -->
    <include file="db/changelog/changes/126-fix-quiz-results-question-ids.xml"/>

    <!-- Add Course Tags -->
    <include file="db/changelog/changes/127-add-course-review-status-table.xml"/>
    <include file="db/changelog/changes/128-seed-course-review-status.xml"/>
    <include file="db/changelog/changes/129-add-password-reset-tokens-table.xml"/>

    <!-- Comments System -->
    <include file="db/changelog/changes/130-create-comments-table.xml"/>
    <!-- TODO: Enable when sample data is available -->
    <include file="db/changelog/changes/131-seed-comments.xml"/>

    <!-- Allow nullable course review status for unpublish functionality -->
    <include file="db/changelog/changes/132-allow-nullable-course-review-status.xml"/>
</databaseChangeLog>
